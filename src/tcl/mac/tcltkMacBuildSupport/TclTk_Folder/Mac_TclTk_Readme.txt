                                Mac Tcl/Tk 8.4  This build of Mac Tcl/Tk 8.4.1 was compiled on Metrowerks  CodeWarrior Pro 6.3 by Daniel A. Steffen on 10 Oct 2002.  The sources of the build (included with the full installer) are  what can be obtained by checking out the HEAD as of   10-Oct-2002 from the SourceForge CVS servers.  See below for news & changes specific to the Mac build;  for general detailed information about what's new in 8.4.0,  see 'ChangeLog' and 'changes' in the 'tcl' and 'tk' folders.  In the same folders, see the 'Tcl Readme' & 'Tk Readme' and  'MacTcl README' & 'MacTk README' for more details about  Tcl/Tk or visit the (relocated) Tcl Developer Xchange:  <http://www.tcl.tk/>  Tcl/Tk development has moved to sourceforge:  <http://tcl.foundries.sourceforge.net/>  For questions & comments about this build, contact:  "Daniel A. Steffen" <mailto:das@users.sourceforge.net>------------Mac specific changes/fixes--------------- Mac Tcl/Tk 8.4.1, Oct 9, 2002 ---* tweaked MSL libraries to weak link with all apple libraries (including  InterfaceLib), which should workaround the various "symbol not found"  startup errors on old OS versions that have been reported.* updated WASTE lib (included in MSL) to 2.0 final.* updated MoreFiles to 1.5.3.* built with latest UniversalInterfaces (3.4.2).The following are the main mac specific Tcl changes since 8.3.4:* [resource, AppleScript]: added utf8 conversion of text resource  contents and of resource/applescript file names.* for files created by tcl, use MSL provided creator type if  available instead of the default 'MPW '.* added disabling tcl/tk library code inclusion in resource fork  of Tcl executables and shared libraries via the  TCLTK_NO_LIBRARY_TEXT_RESOURCES #define. (support for tclkit)* Modified TclpObjNormalizePath to be alias file aware, and replaced  various calls to FSpLocationFrom*Path by calls to new alias file  aware versions.
  The alias file aware routines do NOT resolve the last component of  a path if it is an alias. This allows [file copy/delete] etc. to  act correctly on alias files. (c.f. discussion in Bug #511666)* [socket]: fixed option comparison to behave like on other platforms.* fix for daylight savings TZName bug* synced up tclInit features to unix/win:	 implemented TclSetPreInitScript support, use of existing tclInit 	 proc if defined, check of default encoding dir if set. Changed	 script library resource names to lowercase (i.e. same as	 corresponding files). Used Tcl_JoinPath instead of string append.	 Check that system encoding could be loaded before utf translating	 the LibraryPath.The following are the main mac specific Tk changes since 8.3.4:* include msgcat package in resources as bgerror depends on it.  Added 'panedwindow' & 'spinbox' resources.  Restores ability of mac static build to run standalone  (except for encoding file issues).* fixes to allow Tk to hookup C library stdin/stdout/stderr to  TkConsole when using shared MSL libraries; fix for crashing  bug on exit triggered by writing to stdin/sterr when console  has already been destroyed. (both fixes need support in MSL,  see file 'CW Pro6 changes').* mac/tkMacDialog.c: fixes to Navigation Services Dialog filter.* mac/tkMacDraw.c: add panic for overwide TkImages that would  crash Tk on mac otherwise.* synced up tkInit features to unix/win:  use existing tkInit proc if defined.--- Mac Tcl/Tk 8.3.4, Oct 18, 2001 ---* All tcl tests pass without errors; with the exception of socket, http   and thread tests and of one test in string.test (related to a MSL issue).* The following are the main mac specific Tcl changes since 8.3.3:  - timezone support for mac via TclpGetTZName(), using an inverse    timezone table adapted from tclDate.c  - mac time epoch changed to standard unix epoch  - glob -dir compatibility mode for unix style relative paths  - reorganized resources to avoid multiple copies in applications and    shared libraries, the script libraries are now no longer duplicated    in Tclsh but are only included in the resources of Tcl.shlb* The following are the main mac specific Tk changes since 8.3.3:  - crashing bug fix when printing to console at program exit after    the console has already been closed.  - correct use of Tcl_JoinPath in tk_library initialization  - reorganized resources to avoid multiple copies in applications and    shared libraries, the script libraries & Xcursors etc are now no longer    duplicated in Wish but are only included in the resources of Tk.shlb--- Mac Tcl/Tk 8.3.3, May 4, 2001 ---* All the changes from 8.3.2p1 and the new ones for 8.3.3 below have  been integrated into the official CVS repositories on SourceForge.  * My writeup of a detailed ChangeLog of my mac patches didn't make it  into the official 8.3.3 release, it is added below.  (integrates most of  the earlier comments for Mac Tcl/Tk 8.3.2 and 8.3.2p1 from this readme)  * The following are the main mac specific changes since 8.3.2p1:  - use of DLLIMPORT and DLLEXPORT like on other platforms, no longer use    .exp files to determine what gets exported from DLLs, this also needs    the #defines BUILD_tcl, BUILD_tk & STATIC_BUILD to be setup properly,    thus  - revised precompiled header handling: we now include a common header    file 'MW_TclHeaderCommon.h' from all .pch files, the .pch files    themselves now only setup #defines like in makefiles on other    platforms.  - added support for -filetypes option to tk_getSaveFile (tcl bug #221636)  - added update event handling for background windows while in a    NavigationMgr dialog (thanks to Mats Bengtsson for reporting this &    suggesting a fix)  - fixed crashing bug and memory leak in memory allocation code;
    modernized memory allocation, now use temporary memory instead of
    system heap when application heap is full and use RecoverHandle
    instead of memory allocation tracking; increased fraction of
    application heap reserved for OS routines to 512K.--- Mac Tcl/Tk 8.3.2p1, Dec 11, 2000 ---* Note: version numbers of the new binaries and tclversion/patchlevel are  left unchanged from 8.3.2, the only way to distinguish the 8.3.2p1 install  from 8.3.2 is through modification dates.* Improved/Fixed Installer:  No longer installs an alias to "Tool Command Language" into Extensions,  (this moved existing Tcl extensions and older Tcl installs to the Trash).  Now uses an existing "Extensions:Tool Command Language" folder (or  creates one), and installs aliases to the items in "Tcl/Tk Folder 8.3.2:  Tool Command Language" into it (thus only overwriting older 8.3.*  installs, which are supposed to be compatible).  Moves "Preferences:D&D Tclet Preferences" to the Trash, to avoid  "Drag & Drop Tclets" using an old copy of Wish you may have installed  to create its Droplets.* TK_STUBS:  Tk stub support was badly broken due to multiply defined (mac specific)  names in tk.decls and tkInt.decls.  Now removed the duplicates from the internal unsupported interfaces  "interface tkInt" and "interface tkIntPlat".  moved declaration of TkpIsWindowFloating from tkMacInt.h to  tkInt.decls: interface tkIntPlat  these changes to the stub tables might require you to recompile your  Tk extensions if they turn out to reference one of the removed routines  in the wrong table (should be unlikely).  Note that you can still use CW Pro5 to compile extensions but you need   to link with the Pro6 runtime libraries (included with the 8.3.2 Tcl/Tk  install in "(Pro6 Build Support):Runtime Libraries").* tclMacLibrary.c: throw a compile time error if TCL_REGISTER_LIBRARY and  USE_TCL_STUBS are both enabled, as this combination is not supported and  will cause extensions to crash when loading.--- Mac Tcl/Tk 8.3.2, Oct 31, 2000 ---* Switched to "Installer VISE for Freeware", two installer formats:  Small standalone runtime installer: will allow you to install the Tcl/Tk  runtime files offline; it contains just the bare essentials: Wish,  TclShell, Tcl/Tk shared libraries, Tclapplescript extension, runtime  script libraries and html documentation files.  This installer is  sufficient if you are only using Tcl/Tk to run other people's programs or  scripts, it may not contain everything you need if you are an advanced  user or Tcl developer. Note that on PPC machines the installer will  strip all 68k code from the binaries (resp. the PPC code on 68k  machines), if you need FAT binaries, use the web installer. (e.g. if you  plan to deploy droplets to other users with different platforms from your  own) The 68k binaries require CFM68k to be installed.  Full active web installer: an active installer that downloads its data  from a website during installation, it only fetches exactly the files  needed for your chosen install options. It does everything the  standalone installer does but also allows you to install FAT versions of  the runtime files, more binaries useful for Tcl developers (e.g. stub  libraries; unmerged and static applications & libraries), test binaries &  files and the full source distribution including CodeWarrior Pro 6  project files. (this last option installs a full cvs pull into the "tcl"  and "tk" folders with the mac specific 8.3.2 modifications applied.)* Everything is now installed into a single folder "Tcl/Tk Folder 8.3.2",  and only an alias to "Tcl/Tk Folder 8.3.2:Tool Command Language" is  installed into your Extensions folder, nothing else. This makes  uninstalling trivially easy and also allows to switch between different  Tcl/Tk installs very quickly by changing only this alias.  The "Tool Command Language" folder itself contains aliases to the  binaries in "Tcl/Tk Folder 8.3.2:Build". On some system configurations,  where the "Tcl/Tk Folder 8.3.2" folder is located on another disk from  the startup disk, cross-volume alias resolution may cause a slight  slowdown in fragment loading times e.g. when executing "package require  Tclapplescript". It is possible to avoid this delay by replacing all the  aforementioned aliases by the actual files. (e.g. if you are seeing this  slowdown and are running a lot of little scripts that use AppleScript,  you could get them to start up more quickly this way.)* Built with CodeWarrior Pro6, UnivIntf 3.4 & shared runtime libraries: the  MSL libraries and MoreFiles are no longer compiled into Tcl.shlb, all the  non-static binaries now use the Pro6 shared runtime libraries and  MoreFiles.shlb.  These shlbs are merged into the standard Wish and  TclShell, but 3rd party applications linking with Tcl.shlb or Tk.shlb  will need to setup access to them. (see the "(sh-ppc)" targets from the  "Tcl Developers" install option for an example on how to do this.)  Merging the full MSL.shlb and the other shlbs into Wish & TclShell makes  these applications quite a bit larger than they have been the past, the  "Tcl Developers" installer option has unmerged binaries for those who  don't want to copy this shared code with every application, e.g. when  deploying numerous Wish based droplets.  If you absolutely need project files for CW Pro5 or binaries using the  old Pro5 shared runtime libraries, contact me. To avoid confusion, I do  not want to distribute these publicly, as there is no easy way to  distinguish between binaries built by Pro6 and by Pro5.  Four mac only export symbols in Tcl.shlb had to be renamed to avoid  conflicts with the new UnivIntf or MoreFiles.shlb. If you are linking  directly against Tcl.shlb or Tk.shlb, you will need to change these in  your code as well, if you link against the stub libraries everything  should still work and you should be fine as is. List of renamed symbols:    GetGlobalMouse         -> GetGlobalMouseTcl    FSpGetDirectoryID      -> FSpGetDirectoryIDTcl    FSpOpenResFileCompat   -> FSpOpenResFileCompatTcl    FSpCreateResFileCompat -> FSpCreateResFileCompatTcl* Fixed a nasty bug in the StdFile code that caused crashes when  NavigationMgr was disabled or was not present.* Fixed a number of 68k and CFM68k issues:  - the static Wish 68k now runs again on recent OS versions and PPC    machines, but still without the custom MDEF.  - the CFM68k binaries now work on all OS versions from the free 7.5.5    onwards, with or without AppearanceMgr and/or NavigationMgr installed    and the custom MDEF works.  - Tclapplescript now loads and runs on CFM68k.* Highly experimental "pseudoCarbon" support for Tcl only on OS 8/9: the  binaries in "Build:(Carbon):" link against CarbonLib instead of  InterfaceLib, however the actual code has not been carbonized!  i.e. it  will not run on OSX and may not even run properly with CarbonLib.   However, they should still allow you to build & test OS9 CFM Carbon  binaries that need to link with Tcl.shlb.  On OSX you can use the native  Tcl.framework, but at the moment, you have to build a MachO binary as  there is no CFM glue lib for Tcl.framework.  pseudoCarbonSupport.shlb is a library that manually loads symbols from  InterfaceLib that are not in CarbonLib but are needed by the uncarbonized  code in Tcl.shlb and TclShell.--------New mac specific additions to tcl/ChangeLog for 8.3.4-------2001-10-17 Daniel Steffen <das@users.sourceforge.net>	* mac/tclMacProjects.sea.hqx: updated projects with new version	numbers and resource reorganization; included XML versions of	the projects for CW Pro5 or Pro7 users.		* mac/tcltkMacBuildSupport.sea.hqx: updated build instructions 	and readme's; MoreFiles 1.5.2 added; XML versions of projects.2001-10-17 Daniel Steffen <das@users.sourceforge.net>	Backport of mac specific changes added to 8.4 since 8.3.3:		* generic/tcl.h: removed line continuation in #if clause as this	breaks the mac resource compiler (note that *.r files include tcl.h)		* compat/strftime.c: 	* mac/tclMacTime.c:	* mac/tclMacPort.h:	* generic/tclInt.decls: 	* generic/tclIntPlatDecls.h:	* generic/tclStubInit.c: timezone support for mac via 	TclpGetTZName() like on windows, using an inverse timezone table	adapted from tclDate.c to map gmtoffset in seconds gotten from	the MacOS APIs to a  timezone string, as there is no good way to get	this info from MacOS. I had to make up some unusual timezones and	arbitrarily decide on the most standard of the multiple choices	* generic/tclCmdAH.c:	* generic/tclDate.c:	* generic/tclGetDate.y:	* mac/tclMacInt.h:	* mac/tclMacFile.c: default mac epoch changed to standard unix	epoch and related mac time/date handling changes from TIP17.	* mac/tclMacFile.c: glob -dir compatibility for unix style 	relative paths, from TIP17	* mac/tclMacAppInit.c: support for WASTE text library using	temporary memory, setting has no effect if WASTE is not used.	* tests/cmdAH.test: access time not available on the mac, skip the 	atime touch test		* mac/tclMacApplication.r:	* mac/tclMacLibrary.r:	* mac/tclMacOSA.r:	* mac/tclMacResource.r: updated copyrights/dates in version	strings; reorganized resources among these files to avoid 	multiple copies in applications and shared libraries, the script	libraries are now no longer duplicated in Tclsh but are only  	included in the resources of Tcl.shlb.	* tests/cmdMZ.test:	* tests/exec.test:	* tests/fileName.test: added missing cleanups/tests/catches that	caused tests to fail on the mac.	* doc/tclvars.n: documentation error, env(PWD) should be env(HOME)	--------New mac specific additions to tk/ChangeLog for 8.3.4--------2001-10-17 Daniel Steffen <das@users.sourceforge.net>	* mac/tkMacProjects.sea.hqx: updated projects with new version	numbers and resource reorganization; included XML versions of	the projects for CW Pro5 or Pro7 users.	2001-10-17 Daniel Steffen <das@users.sourceforge.net>	Backport of mac specific changes added to 8.4 since 8.3.3:		* generic/tkConsole.c: crashing bug fix when printing to console	at program exit after the console has already been closed.	Now setting gStdoutInterp=NULL in ConsoleClose().	* mac/tkMacInit.c: correct use of Tcl_JoinPath in tk_library	initialization	* mac/tkMacMenu.c: special MDEF_PROC_OFFSET only needed for	exactly one specifc version of the MWERKS 68k compiler .	* mac/tkMacApplication.r:	* mac/tkMacLibrary.r:	* mac/tkMacResource.r: updated copyrights/dates in version	strings; reorganized resources among these files to avoid 	multiple copies in applications and shared libraries, the script	libraries/Xcursors etc are now no longer duplicated in Wish but	are only included in the resources of Tk.shlb.________________________________________________________________________     The installer for this product was created using     Installer VISE from MindVisionSoftware.     For more information on Installer VISE, contact:           MindVision Software           5901 North 58th Street           Lincoln, NE 68507           Voice: (402) 323-6600          Fax: (402) 323-6611          E-mail: mindvision@mindvision.com           http://www.mindvision.com 

