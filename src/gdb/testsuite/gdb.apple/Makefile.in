# Makefile for gdb.apple part of testsuite

VPATH = @srcdir@
srcdir = @srcdir@

SUBDIRS = @subdirs@

# changed name for old default cc to this:
MY_CC = @MY_CC@

# kept this, too, though:
CC = @CC@

# ...and the flags for it, of course:
CFLAGS = @CFLAGS@

# Also Objective-C compiler is separate:
OBJC = @OBJC@
OBJCFLAGS = @OBJCFLAGS@

LIBS = @LIBS@

EXECUTABLES = bigenum blocks blocks-linetables blocks-linetables2 blocks-queues check-errno dylib-loader file\ \(my\ name\) file-statics function-statics global-blocks-lines global-blocks-lines2 inf-call-interrupt info-pid long-long-call malloc-history nick objc-prog objc-throw-in-inf-fn ostype pc-verify r3376901 r3384998 recurse scoped-typedefs sections shared-cache-sym sigtramp slipnslide struct-ret-err varobj-sel-frame watch-location

MISSING_EXECUTABLES = r3376907

all:
	@echo "Nothing to be done for all..."

info:
install-info:
dvi:
install:
uninstall: force
installcheck:
check:
check-local: $(EXECUTABLES)
.PHONY: check-local

.PHONY: file\ (my\ name).c

blocks: blocks.c
	cc $< -o $@

blocks-linetables: blocks-linetables.c
	cc $< -o $@

blocks-linetables2: blocks-linetables2.c
	cc $< -o $@

blocks-queues: blocks-queues.c
	cc $< -o $@

dylib-loader: dylib-loader.c
	$(CC) $(CFLAGS) -Wno-deprecated-declarations $< -o $@

file\ \(my\ name\): file\ (my\ name).c
	$(CC) $(CFLAGS) 'file (my name).c' -o 'file (my name)'

file-statics: file-statics.c more-statics.c
	$(CC) $(CFLAGS) file-statics.c more-statics.c -o $@

global-blocks-lines: global-blocks-lines.c
	cc $< -o $@

global-blocks-lines2: global-blocks-lines2.c
	cc $< -o $@

objc-prog: objc-prog.m
	cc $< -o $@ -framework Foundation

objc-throw-in-inf-fn: objc-throw-in-inf-fn.m
	cc $< -o $@ -framework Foundation

ostype: ostype.c
	cc $< -o $@

r3376901: r3376901.c
	$(CC) $(CFLAGS) -std=gnu89 $< -o $@

slipnslide: slipnslide.c
	$(CC) $(CFLAGS) -Wno-deprecated-declarations $< -o $@

# 'rm -f' gets the '-v' flag here when the files that it removes can vary:
clean mostlyclean:
	-rm -fv *~ core *.o *.dylib
	-rm -fv $(EXECUTABLES)
	-rm -rfv *.dSYM *_unstripped
	if [ x"${SUBDIRS}" != x"" ]; then \
	    for dir in ${SUBDIRS}; \
	    do \
		    echo "$${dir}:"; \
		    if [ -d $${dir} ]; then \
			    (cd $${dir}; $(MAKE) clean); \
		    fi; \
	    done; \
	else echo "no subdirs to recurse into for target '$@'"; fi

distclean maintainer-clean realclean: clean
	-rm -f Makefile config.status config.log
	-rm -f .DS_Store fix-and-continue/.DS_Store
	-rm -fv *-init.exp *~
	-rm -frv *.log summary detail *.plog *.sum *.psum site.*
	-rm -frv autom4te.cache || rmdir autom4te.cache
	if [ x"${SUBDIRS}" != x"" ]; then \
	    for dir in ${SUBDIRS}; \
	    do \
		    echo "$${dir}:"; \
		    if [ -d $${dir} ]; then \
			    (cd $${dir}; $(MAKE) distclean); \
		    fi; \
	    done ; \
	else echo "no subdirs to recurse into for target '$@'"; fi

Makefile: $(srcdir)/Makefile.in $(srcdir)/configure.ac
	$(SHELL) ./config.status Makefile
